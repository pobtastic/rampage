<!DOCTYPE html>
<html>
<head>
<title>Rampage: Routine at 65280</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="65247.html">65247</a>
</td>
<td class="up">Up: <a href="../maps/all.html#65280">Map</a></td>
<td class="next">
</td>
</tr>
</table>
<div class="description">65280: Routine at FF00</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="56951.html">56951</a> and <a href="64964.html">Sounds_Telecast</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="65280"></span>65280</td>
<td class="instruction">LD A,(65421)</td>
<td class="comment-1" rowspan="3">Return if *<a href="65280.html#65421">65421</a> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65283"></span>65283</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65284"></span>65284</td>
<td class="instruction">RET Z</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65285"></span>65285</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65286"></span>65286</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Write 0 to *<a href="65280.html#65421">65421</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65287"></span>65287</td>
<td class="instruction">LD (65421),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65290"></span>65290</td>
<td class="instruction">LD A,L</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">L</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65291"></span>65291</td>
<td class="instruction">CP 8</td>
<td class="comment-1" rowspan="2">Jump to <a href="65280.html#65387">65387</a> if <span class="register">A</span> is equal to 8.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65293"></span>65293</td>
<td class="instruction">JR Z,<a href="65280.html#65387">65387</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65295"></span>65295</td>
<td class="instruction">CP 9</td>
<td class="comment-1" rowspan="2">Jump to <a href="65280.html#65394">65394</a> if <span class="register">A</span> is equal to 9.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65297"></span>65297</td>
<td class="instruction">JR Z,<a href="65280.html#65394">65394</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65299"></span>65299</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65300"></span>65300</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="3"><span class="register">A</span>*=8.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65301"></span>65301</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65302"></span>65302</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65303"></span>65303</td>
<td class="instruction">LD H,0</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65305"></span>65305</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65306"></span>65306</td>
<td class="instruction">LD DE,65422</td>
<td class="comment-1" rowspan="2"><span class="register">HL</span>+=<a href="65280.html#65422">65422</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65309"></span>65309</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65310"></span>65310</td>
<td class="instruction">LD DE,65413</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="65280.html#65413">65413</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65313"></span>65313</td>
<td class="instruction">LD BC,8</td>
<td class="comment-1" rowspan="1"><span class="register">BC</span>=0008.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65316"></span>65316</td>
<td class="instruction">LDIR</td>
<td class="comment-1" rowspan="1">LDIR.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65318"></span>65318</td>
<td class="instruction">LD A,(65420)</td>
<td class="comment-1" rowspan="3">Jump to <a href="65280.html#65325">65325</a> if *<a href="65280.html#65420">65420</a> is equal to 2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65321"></span>65321</td>
<td class="instruction">CP 2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65323"></span>65323</td>
<td class="instruction">JR Z,<a href="65280.html#65325">65325</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="65325"></span>65325</td>
<td class="instruction">LD A,(65419)</td>
<td class="comment-1" rowspan="3">Jump to <a href="65280.html#65383">Sounds_SpeakerOff</a> if *<a href="65280.html#65419">65419</a> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65328"></span>65328</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65329"></span>65329</td>
<td class="instruction">JR Z,<a href="65280.html#65383">Sounds_SpeakerOff</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65331"></span>65331</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65332"></span>65332</td>
<td class="instruction">LD (65419),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="65280.html#65419">65419</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65335"></span>65335</td>
<td class="instruction">CALL <a href="65280.html#65365">65365</a></td>
<td class="comment-1" rowspan="1">Call <a href="65280.html#65365">65365</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65338"></span>65338</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>+=<span class="register">BC</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65339"></span>65339</td>
<td class="instruction">LD (65413),HL</td>
<td class="comment-1" rowspan="1">Write <span class="register">HL</span> to *<a href="65280.html#65413">65413</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65342"></span>65342</td>
<td class="instruction">JR <a href="65280.html#65325">65325</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="65280.html#65325">65325</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="65344"></span>65344</td>
<td class="instruction">LD A,(65419)</td>
<td class="comment-1" rowspan="3">Jump to <a href="65280.html#65383">Sounds_SpeakerOff</a> if *<a href="65280.html#65419">65419</a> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65347"></span>65347</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65348"></span>65348</td>
<td class="instruction">JR Z,<a href="65280.html#65383">Sounds_SpeakerOff</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65350"></span>65350</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65351"></span>65351</td>
<td class="instruction">LD (65419),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="65280.html#65419">65419</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65354"></span>65354</td>
<td class="instruction">CALL <a href="65280.html#65365">65365</a></td>
<td class="comment-1" rowspan="1">Call <a href="65280.html#65365">65365</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65357"></span>65357</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1">Set the bits from <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65358"></span>65358</td>
<td class="instruction">SBC HL,BC</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>-=<span class="register">BC</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65360"></span>65360</td>
<td class="instruction">LD (65413),HL</td>
<td class="comment-1" rowspan="1">Write <span class="register">HL</span> to *<a href="65280.html#65413">65413</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65363"></span>65363</td>
<td class="instruction">JR <a href="65280.html#65344">65344</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="65280.html#65344">65344</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="65365"></span>65365</td>
<td class="instruction">LD HL,(65413)</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=*<a href="65280.html#65413">65413</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65368"></span>65368</td>
<td class="instruction">LD DE,(65415)</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=*<a href="65280.html#65415">65415</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65372"></span>65372</td>
<td class="instruction">CALL 949</td>
<td class="comment-1" rowspan="1">Call <a href="https://skoolkit.ca/disassemblies/rom/hex/asm/03B5.html">BEEPER</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65375"></span>65375</td>
<td class="instruction">LD HL,(65413)</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=*<a href="65280.html#65413">65413</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65378"></span>65378</td>
<td class="instruction">LD BC,(65417)</td>
<td class="comment-1" rowspan="1"><span class="register">BC</span>=*<a href="65280.html#65417">65417</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65382"></span>65382</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="65383"></span>
<div class="comments">
<div class="paragraph">
Flip speaker off (unset bit 4).
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Sounds_SpeakerOff</td>
<td class="address-2"><span id="65383"></span>65383</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Speaker off.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65384"></span>65384</td>
<td class="instruction">OUT (254),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65386"></span>65386</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="65387"></span>65387</td>
<td class="instruction">LD HL,125</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=0125.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65390"></span>65390</td>
<td class="instruction">LD C,100</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=100.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65392"></span>65392</td>
<td class="instruction">JR <a href="65280.html#65399">65399</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="65280.html#65399">65399</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="65394"></span>65394</td>
<td class="instruction">LD HL,250</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=0250.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65397"></span>65397</td>
<td class="instruction">LD C,25</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=25.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="65399"></span>65399</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65400"></span>65400</td>
<td class="instruction">AND %11111000</td>
<td class="comment-1" rowspan="1">Keep only bits 3-7.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65402"></span>65402</td>
<td class="instruction">OUT (254),A</td>
<td class="comment-1" rowspan="1">OUT 254</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65404"></span>65404</td>
<td class="instruction">LD B,C</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=<span class="register">C</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="65405"></span>65405</td>
<td class="instruction">DJNZ <a href="65280.html#65405">65405</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="65280.html#65405">65405</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65407"></span>65407</td>
<td class="instruction">DEC HL</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65408"></span>65408</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="3">Jump to <a href="65280.html#65399">65399</a> until <span class="register">HL</span> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65409"></span>65409</td>
<td class="instruction">OR L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65410"></span>65410</td>
<td class="instruction">JR NZ,<a href="65280.html#65399">65399</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65412"></span>65412</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65413"></span>65413</td>
<td class="instruction">DEFW 0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65415"></span>65415</td>
<td class="instruction">DEFW 0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65417"></span>65417</td>
<td class="instruction">DEFW 0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65419"></span>65419</td>
<td class="instruction">DEFB 0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65420"></span>65420</td>
<td class="instruction">DEFB 0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65421"></span>65421</td>
<td class="instruction">DEFB 0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65422"></span>65422</td>
<td class="instruction">DEFB 244,1,0,0,50,0,10,1</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65430"></span>65430</td>
<td class="instruction">DEFB 244,1,0,0,244,1,1,2</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65438"></span>65438</td>
<td class="instruction">DEFB 150,0,244,1,200,0,1,2</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65446"></span>65446</td>
<td class="instruction">DEFB 100,0,25,0,100,0,4,0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65454"></span>65454</td>
<td class="instruction">DEFB 232,3,1,0,232,3,5,1</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65462"></span>65462</td>
<td class="instruction">DEFB 232,3,1,0,244,1,6,1</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65470"></span>65470</td>
<td class="instruction">DEFB 150,0,44,1,200,0,1,2</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65478"></span>65478</td>
<td class="instruction">DEFB 66,0,0,60,66,66,66,66</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65486"></span>65486</td>
<td class="instruction">DEFB 60,0,0,124,66,66,124,64</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65494"></span>65494</td>
<td class="instruction">DEFB 64,0,0,60,66,66,82,74</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65502"></span>65502</td>
<td class="instruction">DEFB 60,0,0,124,66,66,124,68</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65510"></span>65510</td>
<td class="instruction">DEFB 66,0,0,60,64,60,2,66</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65518"></span>65518</td>
<td class="instruction">DEFB 60,0,0,254,16,16,16,16</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65526"></span>65526</td>
<td class="instruction">DEFB 16,0,0,66,66,66,66,66</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="65534"></span>65534</td>
<td class="instruction">DEFB 60,0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="65247.html">65247</a>
</td>
<td class="up">Up: <a href="../maps/all.html#65280">Map</a></td>
<td class="next">
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1986 Activision &copy; 2024 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.0.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/rampage/">Source code</a>.</div>
<div><a href="asm/65280.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>