<!DOCTYPE html>
<html>
<head>
<title>Rampage: Routine at F450</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="F434.html">F434</a>
</td>
<td class="up">Up: <a href="../maps/all.html#f450">Map</a></td>
<td class="next">
Next: <a href="F4B8.html">F4B8</a>
</td>
</tr>
</table>
<div class="description">F450: Routine at F450</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="F434.html">ProcessMonsters</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="f450"></span>F450</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="f451"></span>F451</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="f452"></span>F452</td>
<td class="instruction">LD C,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="f453"></span>F453</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="f454"></span>F454</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="f455"></span>F455</td>
<td class="instruction">RRCA</td>
<td class="comment-1" rowspan="1">Rotate <span class="register">A</span> right one position, setting the carry flag if bit 0 was set.</td>
</tr>
<tr>
<td class="address-1"><span id="f456"></span>F456</td>
<td class="instruction">RET NC</td>
<td class="comment-1" rowspan="1">Return if the carry flag is not set.</td>
</tr>
<tr>
<td class="address-1"><span id="f457"></span>F457</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="f458"></span>F458</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="f459"></span>F459</td>
<td class="instruction">RRCA</td>
<td class="comment-1" rowspan="1">Rotate <span class="register">A</span> left one position, setting the carry flag if bit 0 was set.</td>
</tr>
<tr>
<td class="address-1"><span id="f45a"></span>F45A</td>
<td class="instruction">RET C</td>
<td class="comment-1" rowspan="1">Return if the carry flag is set.</td>
</tr>
<tr>
<td class="address-1"><span id="f45b"></span>F45B</td>
<td class="instruction">LD ($D228),BC</td>
<td class="comment-1" rowspan="1">Write <span class="register">BC</span> to *<a href="D227.html#d228">D228</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="f45f"></span>F45F</td>
<td class="instruction">LD H,$00</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=00.</td>
</tr>
<tr>
<td class="address-1"><span id="f461"></span>F461</td>
<td class="instruction">LD L,B</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=<span class="register">B</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="f462"></span>F462</td>
<td class="instruction">LD D,H</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=<span class="register">H</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="f463"></span>F463</td>
<td class="instruction">LD E,C</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=<span class="register">C</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="f464"></span>F464</td>
<td class="instruction">ADD HL,HL</td>
<td class="comment-1" rowspan="6"><span class="register">HL</span>*=20+<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="f465"></span>F465</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="address-1"><span id="f466"></span>F466</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="address-1"><span id="f467"></span>F467</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="address-1"><span id="f468"></span>F468</td>
<td class="instruction">ADD HL,HL</td>
</tr>
<tr>
<td class="address-1"><span id="f469"></span>F469</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="address-1"><span id="f46a"></span>F46A</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=01.</td>
</tr>
<tr>
<td class="address-1"><span id="f46c"></span>F46C</td>
<td class="instruction">LD ($D3FB),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="D3FA.html#d3fb">D3FB</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="f46f"></span>F46F</td>
<td class="instruction">LD ($D22A),HL</td>
<td class="comment-1" rowspan="1">Write <span class="register">HL</span> to *<a href="D227.html#d22a">D22A</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="f472"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="F4B8.html">Handler_Eating</a> and <a href="F4D1.html">Handler_EatFood</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="f472"></span>F472</td>
<td class="instruction">LD DE,$013F</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=013F.</td>
</tr>
<tr>
<td class="address-1"><span id="f475"></span>F475</td>
<td class="instruction">CALL <a href="E0AD.html#e0cf">$E0CF</a></td>
<td class="comment-1" rowspan="1">Call <a href="E0AD.html#e0cf">E0CF</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="f478"></span>F478</td>
<td class="instruction">LD A,($D3FC)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="D3FA.html#d3fc">D3FC</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="f47b"></span>F47B</td>
<td class="instruction">RRCA</td>
<td class="comment-1" rowspan="1">Rotate <span class="register">A</span> right one position, setting the carry flag if bit 0 was set.</td>
</tr>
<tr>
<td class="address-1"><span id="f47c"></span>F47C</td>
<td class="instruction">JR C,<a href="F450.html#f480">$F480</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="F450.html#f480">F480</a> if the carry flag is set.</td>
</tr>
<tr>
<td class="address-1"><span id="f47e"></span>F47E</td>
<td class="instruction">JR Z,<a href="F450.html#f488">$F488</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="F450.html#f488">F488</a> if <span class="register">A</span> is zero.</td>
</tr>
<tr>
<td class="address-2"><span id="f480"></span>F480</td>
<td class="instruction">LD BC,$0000</td>
<td class="comment-1" rowspan="1"><span class="register">BC</span>=0000.</td>
</tr>
<tr>
<td class="address-1"><span id="f483"></span>F483</td>
<td class="instruction">LD E,$01</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=01.</td>
</tr>
<tr>
<td class="address-1"><span id="f485"></span>F485</td>
<td class="instruction">CALL <a href="F4E6.html#f543">$F543</a></td>
<td class="comment-1" rowspan="1">Call <a href="F4E6.html#f543">F543</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="f488"></span>F488</td>
<td class="instruction">LD A,($D215)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="D215.html">D215</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="f48b"></span>F48B</td>
<td class="instruction">CP $4D</td>
<td class="comment-1" rowspan="2">Jump to <a href="F4E6.html">F4E6</a> if <span class="register">A</span> is lower than 4D.</td>
</tr>
<tr>
<td class="address-1"><span id="f48d"></span>F48D</td>
<td class="instruction">JR C,<a href="F4E6.html">$F4E6</a></td>
</tr>
<tr>
<td class="address-1"><span id="f48f"></span>F48F</td>
<td class="instruction">SUB $4C</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=4C.</td>
</tr>
<tr>
<td class="address-1"><span id="f491"></span>F491</td>
<td class="instruction">AND %00000011</td>
<td class="comment-1" rowspan="1">Keep only bits 0-1.</td>
</tr>
<tr>
<td class="address-1"><span id="f493"></span>F493</td>
<td class="instruction">CP $01</td>
<td class="comment-1" rowspan="2">Jump to <a href="F4E6.html">F4E6</a> if <span class="register">A</span> is not equal to 01.</td>
</tr>
<tr>
<td class="address-1"><span id="f495"></span>F495</td>
<td class="instruction">JR NZ,<a href="F4E6.html">$F4E6</a></td>
</tr>
<tr>
<td class="address-1"><span id="f497"></span>F497</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="2">Write 01 to *<a href="D3FA.html#d3fc">D3FC</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="f499"></span>F499</td>
<td class="instruction">LD ($D3FC),A</td>
</tr>
<tr>
<td class="address-1"><span id="f49c"></span>F49C</td>
<td class="instruction">LD A,($D215)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="D215.html">D215</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="f49f"></span>F49F</td>
<td class="instruction">SUB $4D</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=4D.</td>
</tr>
<tr>
<td class="address-1"><span id="f4a1"></span>F4A1</td>
<td class="instruction">SRL A</td>
<td class="comment-1" rowspan="2">Shift <span class="register">A</span> right twice.</td>
</tr>
<tr>
<td class="address-1"><span id="f4a3"></span>F4A3</td>
<td class="instruction">SRL A</td>
</tr>
<tr>
<td class="address-1"><span id="f4a5"></span>F4A5</td>
<td class="instruction">CP $08</td>
<td class="comment-1" rowspan="2">Jump to <a href="F4B8.html">Handler_Eating</a> if <span class="register">A</span> is lower than 08.</td>
</tr>
<tr>
<td class="address-1"><span id="f4a7"></span>F4A7</td>
<td class="instruction">JR C,<a href="F4B8.html">Handler_Eating</a></td>
</tr>
<tr>
<td class="address-1"><span id="f4a9"></span>F4A9</td>
<td class="instruction">AND %00000011</td>
<td class="comment-1" rowspan="1">Keep only bits 0-1.</td>
</tr>
<tr>
<td class="address-1"><span id="f4ab"></span>F4AB</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">Increment <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="f4ac"></span>F4AC</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="f4ad"></span>F4AD</td>
<td class="instruction">LD D,A</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="f4ae"></span>F4AE</td>
<td class="instruction">LD E,$03</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=03.</td>
</tr>
<tr>
<td class="address-1"><span id="f4b0"></span>F4B0</td>
<td class="instruction">LD A,($DF45)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="DF45.html">Temp_MonsterID</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="f4b3"></span>F4B3</td>
<td class="instruction">CALL <a href="DD97.html">Handler_AddPoints</a></td>
<td class="comment-1" rowspan="1">Call <a href="DD97.html">Handler_AddPoints</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="f4b6"></span>F4B6</td>
<td class="instruction">JR <a href="F4D1.html#f4dc">Handler_EatFood_SetState</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="F4D1.html#f4dc">Handler_EatFood_SetState</a>.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="F434.html">F434</a>
</td>
<td class="up">Up: <a href="../maps/all.html#f450">Map</a></td>
<td class="next">
Next: <a href="F4B8.html">F4B8</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1986 Activision &copy; 2024 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.0.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/rampage/">Source code</a>.</div>
<div><a href="../dec/asm/62544.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>